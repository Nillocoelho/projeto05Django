# Diagrama Detalhado - Prรกtica 05

## ๐๏ธ Estrutura de Banco de Dados

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         BIBLIOTECA DATABASE SCHEMA                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโ
โ      AUTOR         โ
โโโโโโโโโโโโโโโโโโโโโโค
โ PK โ id           โ INT (Auto)
โ    โ nome         โ VARCHAR(100)
โโโโโโโโโโฌโโโโโโโโโโโโ
         โ
         โ 1
         โ
         โ N
         โ
โโโโโโโโโโดโโโโโโโโโโโโ         โโโโโโโโโโโโโโโโโโโโโโโ
โ    PUBLICA         โ         โ      LIVRO          โ
โโโโโโโโโโโโโโโโโโโโโโค         โโโโโโโโโโโโโโโโโโโโโโโค
โ PK โ id           โ INT     โ PK โ id            โ INT (Auto)
โ FK โ livro_id     โโโโโโโโโโโค    โ titulo        โ VARCHAR(200)
โ FK โ autor_id     โ         โ    โ publicacao    โ DATE
โโโโโโโโโโโโโโโโโโโโโโ         โ    โ preco         โ DECIMAL(10,2)
                               โ    โ estoque       โ INT
                               โ FK โ editora_id    โโโโโ
                               โโโโโโโโโโโโโโโโโโโโโโโ   โ
                                                          โ N
                                                          โ
                                                          โ 1
                               โโโโโโโโโโโโโโโโโโโโโโโ   โ
                               โ     EDITORA         โโโโโ
                               โโโโโโโโโโโโโโโโโโโโโโโค
                               โ PK โ id            โ INT (Auto)
                               โ    โ nome          โ VARCHAR(100)
                               โโโโโโโโโโโโโโโโโโโโโโโ

RELACIONAMENTOS:
โข Editora 1:N Livro (Uma editora tem vรกrios livros)
โข Livro N:N Autor (atravรฉs de Publica - Um livro pode ter vรกrios autores)
โข Autor N:N Livro (atravรฉs de Publica - Um autor pode ter vรกrios livros)
```

## ๐๏ธ Arquitetura do Projeto (MVC/MVT)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DJANGO MVT (Model-View-Template)                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโ
โ   BROWSER    โ
โ  (Cliente)   โ
โโโโโโโโโฌโโโโโโโ
        โ HTTP Request
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    urls.py (URL Router)                โ
โ  โข /                      โ home                       โ
โ  โข /autores/              โ autor_list                 โ
โ  โข /autores/criar/        โ autor_create               โ
โ  โข /autores/<id>/editar/  โ autor_update               โ
โ  โข /autores/<id>/excluir/ โ autor_delete               โ
โ  โข (... 12 outras rotas para Editora, Livro, Publica) โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   views.py (Controller)                โ
โ  โข Recebe request                                      โ
โ  โข Processa lรณgica de negรณcio                         โ
โ  โข Interage com Models via ORM                        โ
โ  โข Renderiza Templates                                โ
โ  โข Retorna response                                   โ
โโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ                      โ
         โผ                      โผ
โโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโ
โ  models.py     โ    โ   forms.py         โ
โ  (Model)       โ    โ   (ModelForm)      โ
โ                โ    โ                    โ
โ โข Autor        โ    โ โข AutorForm        โ
โ โข Editora      โ    โ โข EditoraForm      โ
โ โข Livro        โ    โ โข LivroForm        โ
โ โข Publica      โ    โ โข PublicaForm      โ
โโโโโโโโโโฌโโโโโโโโ    โโโโโโโโโโโโโโโโโโโโโโ
         โ
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโ
โ    DATABASE          โ
โ    (SQLite3)         โ
โ  โข biblioteca_autor  โ
โ  โข biblioteca_editoraโ
โ  โข biblioteca_livro  โ
โ  โข biblioteca_publicaโ
โโโโโโโโโโโโโโโโโโโโโโโโ

                     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ   templates/ (View/Template)   โ
                     โ                                โ
                     โ  base.html                     โ
                     โ    โโ home.html                โ
                     โ    โโ autor_list.html          โ
                     โ    โโ autor_form.html          โ
                     โ    โโ autor_confirm_delete.htmlโ
                     โ    โโ editora_*.html (3 files) โ
                     โ    โโ livro_*.html (3 files)   โ
                     โ    โโ publica_*.html (3 files) โ
                     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                    โ
                                    โ HTTP Response
                                    โผ
                             โโโโโโโโโโโโโโโโ
                             โ   BROWSER    โ
                             โ  (Cliente)   โ
                             โโโโโโโโโโโโโโโโ
```

## ๐ Fluxo de Dados (CRUD)

### CREATE (Criar)
```
โโโโโโโโโโโโ    GET /autores/criar/    โโโโโโโโโโโโโ
โ Browser  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ  View     โ
โโโโโโโโโโโโ                            โ  autor_   โ
                                        โ  create() โ
     โฒ                                  โโโโโโโฌโโโโโโ
     โ                                        โ
     โ                                        โผ
     โ                               โโโโโโโโโโโโโโโโโโ
     โ        Formulรกrio vazio       โ   AutorForm    โ
     โ    โโโโโโโโโโโโโโโโโโโโโโโ    โ   (vazio)      โ
     โ                               โโโโโโโโโโโโโโโโโโ
     โ
     โ    POST /autores/criar/
     โ    (dados do formulรกrio)
     โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โโโโโโโโโโโโโ
                                    โ  View     โ
                                    โ  autor_   โ
                                    โ  create() โ
                                    โโโโโโโฌโโโโโโ
                                          โ
                                          โผ
                                   โโโโโโโโโโโโโโโโโโ
                                   โ   AutorForm    โ
                                   โ   .is_valid()  โ
                                   โ   .save()      โ
                                   โโโโโโโโโฌโโโโโโโโโ
                                          โ
                                          โผ
                                   โโโโโโโโโโโโโโ
                                   โ  Database  โ
                                   โ  INSERT    โ
                                   โโโโโโโโโโโโโโ
```

### READ (Listar)
```
Browser โโโโโGET /autores/โโโโโ autor_list() โโโ Autor.objects.all()
                                      โ                   โ
                                      โ                   โผ
                                      โ            โโโโโโโโโโโโโโ
                                      โ            โ  Database  โ
                                      โ            โ  SELECT *  โ
                                      โผ            โโโโโโโโโโโโโโ
                           โโโโโโโโโโโโโโโโโโโโ
                           โ  autor_list.html โ
                           โ  (renderizado)   โ
                           โโโโโโโโโโโโโโโโโโโโ
```

### UPDATE (Editar)
```
Browser โGET /autores/1/editar/โโ autor_update(1) โโโ get_object_or_404()
                                         โ                      โ
                                         โ                      โผ
                                         โ               โโโโโโโโโโโโโโ
                                         โ               โ  Database  โ
                                         โ               โ  SELECT    โ
                                         โผ               โโโโโโโโโโโโโโ
                              โโโโโโโโโโโโโโโโโโโโโ
                              โ   AutorForm       โ
                              โ   (preenchido)    โ
                              โโโโโโโโโโโโโโโโโโโโโ
                                         โ
Browser โโโโโ Formulรกrio preenchido โโโโโ

Browser โPOST /autores/1/editar/โโ autor_update(1) โโโ form.save()
                                                              โ
                                                              โผ
                                                       โโโโโโโโโโโโโโ
                                                       โ  Database  โ
                                                       โ  UPDATE    โ
                                                       โโโโโโโโโโโโโโ
```

### DELETE (Excluir)
```
Browser โGET /autores/1/excluir/โโ autor_delete(1) โโโ get_object_or_404()
                                          โ                     โ
                                          โ                     โผ
                                          โ              โโโโโโโโโโโโโโ
                                          โผ              โ  Database  โ
                            โโโโโโโโโโโโโโโโโโโโโโโโ    โ  SELECT    โ
                            โ autor_confirm_delete โ    โโโโโโโโโโโโโโ
                            โ    .html             โ
                            โโโโโโโโโโโโโโโโโโโโโโโโ
                                          โ
Browser โโโโโ Confirmaรงรฃo de exclusรฃo โโโโ

Browser โPOST /autores/1/excluir/โโ autor_delete(1) โโโ autor.delete()
                                                               โ
                                                               โผ
                                                        โโโโโโโโโโโโโโ
                                                        โ  Database  โ
                                                        โ  DELETE    โ
                                                        โโโโโโโโโโโโโโ
```

## ๐ฆ Dependรชncias do Projeto

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         requirements.txt                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  Django>=5.0,<6.0                         โ
โ    โโโ asgiref                            โ
โ    โโโ sqlparse                           โ
โ    โโโ tzdata                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐จ Hierarquia de Templates

```
templates/biblioteca/
โ
โโโ base.html (Template Pai)
โ   โโโ Navbar
โ   โโโ Container para conteรบdo
โ   โโโ Sistema de mensagens
โ   โโโ Footer
โ
โโโ home.html (extends base.html)
โ   โโโ Cards com estatรญsticas
โ   โโโ Informaรงรตes do projeto
โ
โโโ autor_list.html (extends base.html)
โ   โโโ Tabela com lista de autores
โ
โโโ autor_form.html (extends base.html)
โ   โโโ Formulรกrio criar/editar autor
โ
โโโ autor_confirm_delete.html (extends base.html)
โ   โโโ Confirmaรงรฃo de exclusรฃo
โ
โโโ editora_list.html (extends base.html)
โโโ editora_form.html (extends base.html)
โโโ editora_confirm_delete.html (extends base.html)
โ
โโโ livro_list.html (extends base.html)
โโโ livro_form.html (extends base.html)
โโโ livro_confirm_delete.html (extends base.html)
โ
โโโ publica_list.html (extends base.html)
โโโ publica_form.html (extends base.html)
โโโ publica_confirm_delete.html (extends base.html)
```

## ๐ Django Admin

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Django Admin Interface                   โ
โ              /admin/                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ                                                       โ
โ  BIBLIOTECA                                          โ
โ    โโโ Autores                                       โ
โ    โ   โโโ Add autor                                 โ
โ    โ   โโโ Change autor                              โ
โ    โ       โข List display: id, nome                  โ
โ    โ       โข Search: nome                            โ
โ    โ                                                  โ
โ    โโโ Editoras                                      โ
โ    โ   โโโ Add editora                               โ
โ    โ   โโโ Change editora                            โ
โ    โ       โข List display: id, nome                  โ
โ    โ       โข Search: nome                            โ
โ    โ                                                  โ
โ    โโโ Livros                                        โ
โ    โ   โโโ Add livro                                 โ
โ    โ   โโโ Change livro                              โ
โ    โ       โข List display: id, titulo, editora,      โ
โ    โ         publicacao, preco, estoque              โ
โ    โ       โข Search: titulo                          โ
โ    โ       โข Filter: editora, publicacao             โ
โ    โ                                                  โ
โ    โโโ Publicacoes                                   โ
โ        โโโ Add publica                               โ
โ        โโโ Change publica                            โ
โ            โข List display: id, livro, autor          โ
โ            โข Search: livro__titulo, autor__nome      โ
โ            โข Filter: livro, autor                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Resumo de Componentes

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  COMPONENTES DO PROJETO                   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ  Models:          4   (Autor, Editora, Livro, Publica)  โ
โ  Forms:           4   (AutorForm, EditoraForm, ...)     โ
โ  Views:          17   (16 CRUDs + home)                 โ
โ  URLs:           17   (todas mapeadas)                  โ
โ  Templates:      14   (base + 13 especรญficos)           โ
โ  Admin Classes:   4   (todos registrados)               โ
โ  Tests:           4   (um por model)                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**Diagrama criado para Prรกtica 05 - Django ModelForm e CRUD**
